(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,a){e.exports={CardGroup:"ProductList_CardGroup__yvZEB"}},114:function(e,t,a){e.exports={Favorite:"Favorite_Favorite__YD45d"}},115:function(e,t,a){e.exports={CardImage:"ProductCard_CardImage__3ou4W"}},118:function(e,t,a){e.exports=a(192)},191:function(e,t,a){},192:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(64),c=a(47),i=a(18),o=a(38),s=a(11),u=a(16),m=a(46),d=a.n(m),p=(a(127),a(65)),E=function(e){return{type:"ADD_FILTER",filter:e}};function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={searchWord:"",sort:"-favorites",filters:{type:null,country:null,vintage:null,packaging:null,eco:null,kosher:null,bioDynamic:null,green_packaging:null,gluten:null,volume:null,price:null,pricePerLiter:null,alcohol:null,tannins:null,fullness:null,freshness:null,sweetness:null,bitterness:null}},h=a(34),b=a(35),y=a(21),k=Object(u.b)(null,{addSearchWord:function(e){return{type:"ADD_SEARCH_WORD",searchWord:e}},resetFilter:function(){return{type:"RESET_FILTER"}}})(Object(b.f)((function(e){var t=e.resetFilter,a=e.addSearchWord,l=e.history,c=Object(n.useState)(""),i=Object(y.a)(c,2),o=i[0],s=i[1],u=function(){t(),a(o),l.push("/")};return r.a.createElement("form",{className:"form-inline mx-auto"},r.a.createElement("div",{className:"form-group my-auto"},r.a.createElement("input",{onChange:function(e){return s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),u())},className:"form-control mr-sm-2",type:"search",placeholder:"S\xf8k p\xe5 produkt","aria-label":"S\xf8k p\xe5 produkt"}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn gl-btn-outline-polet d-none d-sm-block ml-2 my-2 my-sm-0",type:"button",onClick:u},"S\xf8k"))))}))),N=function(){return r.a.createElement("nav",{className:"navbar fixed-top navbar-expand-lg bg-white navbar-light border-bottom border-secondary"},r.a.createElement("a",{className:"navbar-brand",href:"/"},r.a.createElement("img",{src:"polet-logo.png",width:"30",height:"30",className:"d-inline-block align-top",alt:"logo"}),r.a.createElement("span",{className:"d-none d-sm-inline"}," Fyllikoholiker ")),r.a.createElement(k,null),r.a.createElement(h.b,{activeStyle:{color:"#DDD",pointerEvents:"none"},"data-cy":"Oversikt",to:"/overview",className:"gl-text-polet-hover"}," Oversikt "))},O=a(86),F=a.n(O),_=function(e){var t=e.alt,a=e.selected,n=e.toggleChecked;return r.a.createElement("div",null,r.a.createElement("input",{className:F.a.Checkbox,type:"checkbox",onChange:n,checked:-1!==a.indexOf(t),value:t,id:t}),r.a.createElement("label",{"data-cy":t,className:F.a.Label,htmlFor:t}," ",t," "))},j=Object(u.b)((function(e){return{filters:e.filters}}),{addFilter:E})((function(e){var t=e.filterKey,a=e.options,n=e.addFilter,l=e.filters[t]||[],c=a.alternatives,i=function(e){var a=e.target,r=a.value,c=a.checked,i=l?l.filter((function(e){return e!==r})):[];c&&i.push(r),i=0===i.length?null:i,n(Object(p.a)({},t,i))};return r.a.createElement(r.a.Fragment,null,c.map((function(e){return r.a.createElement(_,{key:e,alt:e,selected:l,toggleChecked:i})})))})),x=(a(194),a(180),Object(u.b)((function(e){return{filters:e.filters}}),{addFilter:E})((function(e){var t=e.filterKey,a=e.options,l=(e.addFilter,e.filters),c=a.min,i=a.max,o=(a.step,l[t]),s=Object(n.useState)([c,i]),u=Object(y.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)((function(){null===o&&d([c,i])}),[o,c,i]);var p={};return p[m[0]]=m[0],p[m[1]]=m[1],r.a.createElement("div",{className:"m-2"})}))),S=function(e){var t=e.name,a=e.filterKey,l=e.type,c=e.options,i=Object(n.useState)(!1),o=Object(y.a)(i,2),s=o[0],u=o[1],m=s?"show":null,d=null;return"checkbox"===l?d=r.a.createElement(j,{filterKey:a,options:c}):"slider"===l&&(d=r.a.createElement(x,{filterKey:a,options:c})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-footer gl-bg-polet-light cursor-pointer","data-cy":t,onClick:function(){return u(!s)}},t,r.a.createElement("div",{className:"float-right text-polet"},s?"\u25b2":"\u25bc")),r.a.createElement("div",{className:"card-body collapse "+m},d))},C=[{name:"Type",filterKey:"filterType",type:"checkbox",options:{alternatives:["Akevitt","Portvin","Vodka","Druebrennevin","Whisky","Lik\xf8r","Gin","Bitter","R\xf8dvin","Hvitvin","Ros\xe9vin","Musserende vin","Rom","India pale ale","Sider","Annen type"]}},{name:"Land",filterKey:"filterCountry",type:"checkbox",options:{alternatives:["Norge","Tyskland","Portugal","Frankrike","Skottland","Italia","USA","Spania","S\xf8r-Afrika","Annet land"]}},{name:"Volum (cl)",filterKey:"volume",type:"slider",options:{min:0,max:2e3,step:10}},{name:"Pris (kr)",filterKey:"price",type:"slider",options:{min:0,max:42e3,step:10}},{name:"Pris per liter (kr)",filterKey:"pricePerLiter",type:"slider",options:{min:0,max:6e4,step:10}},{name:"Alkohol (%)",filterKey:"alcohol",type:"slider",options:{min:0,max:60,step:1}}],P=function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header gl-bg-polet"},"Filter results"),C.map((function(e,t){return r.a.createElement(S,{key:t,name:e.name,filterKey:e.filterKey,type:e.type,options:e.options})})))},w=a(49),I=a(27),L=a(110),D=a.n(L),W=a(111),A=a.n(W),R=a(57),T=a(58);function K(){var e=Object(R.a)(["\n    query {\n        watches {\n            countries\n            types\n        }\n    }\n"]);return K=function(){return e},e}function $(){var e=Object(R.a)(["\n    mutation toggleFavorite($productId: String!){\n        toggleFavorite(productId: $productId){\n            id\n            product {\n                id\n                name\n            }\n            user {\n                id\n            }\n        }\n    }\n"]);return $=function(){return e},e}function M(){var e=Object(R.a)(["\n    query Product($id: String!) {\n        product(id: $id){\n            id\n            isFavorited\n            date\n            name\n            volume\n            price\n            pricePerLiter\n            alcohol\n            type\n            tannins\n            fullness\n            freshness\n            sweetness\n            bitterness\n            color\n            aroma\n            taste\n            goodWith\n            country\n            district\n            vintage\n            method\n            sugar\n            img\n            packaging\n            url \n            eco\n            bioDynamic\n            fairTrade\n            green_packaging\n            gluten\n        }   \n    }\n"]);return M=function(){return e},e}function B(){var e=Object(R.a)(["\n  query Products($searchWord: String!, $limit: Int, $skip: Int, $filters: FilterInputObject, $sort: String){\n        products(search: $searchWord, limit: $limit, skip: $skip, filters: $filters, sort: $sort) {\n            products {\n                id\n                isFavorited\n                img\n                name\n                volume\n                type\n                country\n                price\n                alcohol\n            }\n        totalCount\n        }\n    }\n"]);return B=function(){return e},e}var G=Object(T.a)(B()),J=Object(T.a)(M()),q=Object(T.a)($()),V=Object(T.a)(K()),X=a(114),H=a.n(X),z=function(e){var t=e.productId,a=e.isFavorited,l=Object(n.useState)(a),c=Object(y.a)(l,2),i=c[0],o=c[1],s=i?"icons/favorite-solid.svg":"icons/favorite-regular.svg",u=Object(I.a)(q),m=Object(y.a)(u,1)[0];return r.a.createElement("div",{className:H.a.Favorite,"favorite-button":"fav",onClick:function(){o(!i),m({variables:{productId:t}})}},r.a.createElement("img",{src:s,alt:"Toggle favorite"}))},U=a(115),Y=a.n(U);function Z(e){return e.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}function Q(e){return e.toString().replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}var ee=function(e){var t=e.id,a=e.isFavorited,n=e.img,l=e.name,c=e.volume,i=e.type,o=e.country,s=e.price,u=e.alcohol;return r.a.createElement("div",{"data-cy":"unique-product"},r.a.createElement("div",{style:{position:"absolute",zIndex:"1000"}},r.a.createElement(z,{productId:t,isFavorited:a})),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"gl-text-align-center mx-auto"},r.a.createElement("img",{className:["card-img-top",Y.a.CardImage].join(" "),src:n,alt:"preview of product"})),r.a.createElement("div",{className:"card-body","data-cy":"unique-card"},r.a.createElement(h.b,{to:"product/"+t,className:"gl-text-polet-hover stretched-link"},r.a.createElement("h5",{className:"card-title","card-title":l}," ",l," ")),r.a.createElement("h6",{className:"card-text text-muted"}," ",i,o?", "+o:null," "),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"}," ",r.a.createElement("b",null,"Pris:")," ",Z(s)," kr "),r.a.createElement("li",{className:"list-group-item"}," ",r.a.createElement("b",null,"Prosent:")," ",Q(u)," % "),r.a.createElement("li",{className:"list-group-item"}," ",r.a.createElement("b",null,"St\xf8rrelse:")," ",Q(c)," liter  ")))))},te=a(116),ae=a.n(te),ne=Object(u.b)((function(e){return{searchWord:e.searchWord,filters:e.filters,sort:e.sort}}),null)((function(e){var t=e.searchWord,a=e.filters,n=e.sort,l=e.isFavorited;a=ae()(Object.entries(a).filter((function(e){var t=Object(y.a)(e,2);t[0];return null!==t[1]}))),l&&(a.isFavorited=!0);var c=Object(I.b)(G,{variables:{searchWord:t,filters:a,sort:n,limit:12,skip:0}}),i=c.loading,o=c.error,s=c.data,u=r.a.createElement("div",{className:"spinner-grow text-warning ml-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."));if(i)return u;if(o)return r.a.createElement("p",null,"Error.....");var m=s.products,d=m.products,p=m.totalCount,E=p-d.length!==0;return r.a.createElement(D.a,{pageStart:0,loadMore:function(){return c.fetchMore({variables:{skip:d.length},updateQuery:function(e,t){var a=t.fetchMoreResult;return a?{products:{products:[].concat(Object(w.a)(e.products.products),Object(w.a)(a.products.products)),totalCount:e.products.totalCount,__typename:"ProductsResult"}}:e}})},hasMore:E,loader:u},r.a.createElement("i",null," Showing ",p," results "),r.a.createElement("div",{className:A.a.CardGroup},d.map((function(e){var t=e.id,a=e.isFavorited,n=e.img,l=e.name,c=e.volume,i=e.type,o=e.country,s=e.price,u=e.alcohol;return r.a.createElement(ee,{id:t,key:t,isFavorited:a,img:n,name:l,volume:c,type:i,country:o,price:s,alcohol:u})}))))})),re=Object(u.b)(null,{addSort:function(e){return{type:"ADD_SORT",sort:e}}})((function(e){var t=e.addSort;return r.a.createElement("select",{className:"form-control col-4",onChange:function(e){return t(e.target.value)}},r.a.createElement("option",{value:"-favorites"}," Mest favoritiserte "),r.a.createElement("option",{value:"-watches"}," Mest sette "),r.a.createElement("option",{value:"price"}," Pris (laveste f\xf8rst) "),r.a.createElement("option",{value:"-price"}," Pris (h\xf8yeste f\xf8rst) "),r.a.createElement("option",{value:"-alcohol"}," Alkohol (h\xf8yeste f\xf8rst) "),r.a.createElement("option",{value:"alcohol"}," Alkohol (laveste f\xf8rst) "),r.a.createElement("option",{value:"-pricePerLiter"}," Literpris (h\xf8yeste f\xf8rst) "),r.a.createElement("option",{value:"pricePerLiter"}," Literpris (laveste f\xf8rst) "),r.a.createElement("option",{value:"-volume"}," Volum (h\xf8yeste f\xf8rst) "),r.a.createElement("option",{value:"volume"}," Volum (laveste f\xf8rst) "))})),le=a(50),ce=a.n(le),ie=function(){return r.a.createElement("div",{className:ce.a.Main},r.a.createElement("div",{className:"container-fluid "+ce.a.Controls},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8 w-50"},r.a.createElement("h3",{className:ce.a.SearchResults}," S\xf8keresultater ")),r.a.createElement(re,null))),r.a.createElement("div",{className:ce.a.Filters},r.a.createElement(P,null)),r.a.createElement("div",{className:ce.a.ProductList},r.a.createElement(ne,null)))},oe=a(87),se=a.n(oe),ue=function(e){var t=e.text,a=e.subtext;return t||a?r.a.createElement("div",null,r.a.createElement("h1",null,t),r.a.createElement("h6",null,a)):null},me=function(e){var t=e.list;return t&&0!==t.length?r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group list-group-flush"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-group-item"}," ",e," ")})))):null},de=function(e){var t=e.title,a=e.text;return a&&", , "!==a?r.a.createElement("div",null,r.a.createElement("h6",null," ",t," "),r.a.createElement("p",null,a)):null},pe=function(){var e=Object(b.e)().id,t=Object(I.b)(J,{variables:{id:e}}),a=t.loading,n=t.error,l=t.data;if(a)return r.a.createElement("div",{className:"spinner-grow text-warning",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."));if(n)return r.a.createElement("p",null,"Error.......");var c=l.product,i=[r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Alkohol: ")," ",Q(c.alcohol),"% "),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," St\xf8rrelse: ")," ",Q(c.volume)," litres "),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Literpris: ")," ",Z(c.pricePerLiter)," kr/liter ")].filter((function(e){return"0"!==e.props.children[2]&&"0,00"!==e.props.children[2]})),o=[r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Friskhet: ")," ",c.freshness," av 12"),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Fylde: ")," ",c.fullness," av 12"),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," S\xf8dme: ")," ",c.sweetness," av 12")].filter((function(e){return 0!==e.props.children[2]})),s=[r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Land: ")," ",c.country),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Distrikt: ")," ",c.district),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," \xc5rgang: ")," ",c.vintage)].filter((function(e){return""!==e.props.children[2]})),u=[r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Kosher: ")," ",c.kosher?"Ja":"Nei"),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," \xd8kologisk: ")," ",c.eco?"Ja":"Nei"),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Gr\xf8nn forpakning: ")," ",c.green_packaging?"Ja":"Nei"),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Glutenfri: ")," ",c.gluten?"Ja":"Nei"),r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null," Fair Trade: ")," ",c.fairTrade?"Ja":"Nei")];return r.a.createElement("div",{className:"gl-main-container"},r.a.createElement("img",{className:se.a.Img,src:c.img,alt:""}),r.a.createElement("h1",null," ",c.name," "),c.taste?r.a.createElement("i",null," ",c.taste," "):null,r.a.createElement(z,{productId:c.id,isFavorited:c.isFavorited}),r.a.createElement("hr",null),r.a.createElement("div",{className:se.a.InfoContainer},r.a.createElement(ue,{text:"Kr. "+Z(c.price)}),r.a.createElement(de,{title:"Produkttype",text:c.type}),r.a.createElement(me,{list:i}),r.a.createElement(me,{list:o}),r.a.createElement(me,{list:s}),r.a.createElement(de,{title:"Smak og aroma",text:c.aroma}),r.a.createElement(de,{title:"Passer til",text:c.goodWith.join(", ")}),r.a.createElement(de,{title:"Lagringsgrad",text:c.method}),r.a.createElement(de,{title:"Farge",text:c.color}),r.a.createElement(me,{list:u}),r.a.createElement(me,{list:s}),r.a.createElement("div",null,r.a.createElement("h6",null,"Link til Vinmonopolet"),r.a.createElement("a",{href:c.url},c.url))))},Ee=a(88),fe=function(){var e=Object(I.b)(V),t=e.loading,a=e.error,n=e.data,l=r.a.createElement("div",{className:"spinner-grow text-warning ml-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."));if(t)return l;if(a)return r.a.createElement("p",null," Error..... ");var c=n.watches,i=c.countries,o=c.types;return i=i.map((function(e){return[e[0],parseInt(e[1])]})),o=o.map((function(e){return[e[0],parseInt(e[1])]})),0===i.length&&(i=["",0]),0===o.length&&(o=["",0]),r.a.createElement("div",{className:"gl-main-container container"},r.a.createElement("h1",null," Bes\xf8kstatistikk "),r.a.createElement("h6",{className:"text-polet-dark"},r.a.createElement("i",null," Et bes\xf8k registreres n\xe5r en bruker klikker seg inn p\xe5 et produkt ")),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(Ee.a,{height:"400px",chartType:"BarChart",loader:"Loading",data:[["Type","Bes\xf8k"]].concat(Object(w.a)(o)),options:{title:"Antall bes\xf8k per produkttype",colors:["#C2B067"],legend:"none",toggle:!1}})),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(Ee.a,{height:"400px",chartType:"BarChart",loader:"Loading",data:[["Land","Bes\xf8k"]].concat(Object(w.a)(i)),options:{title:"Antall bes\xf8k per land",colors:["#C2B067"],legend:"none"}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",null," Dine favoritter "),r.a.createElement("hr",null),r.a.createElement(ne,{isFavorited:!0}))))},ve=function(){return r.a.createElement(h.a,null,r.a.createElement(N,null),r.a.createElement(b.a,{exact:!0,path:"/",component:ie}),r.a.createElement(b.a,{path:"/product/:id",component:pe}),r.a.createElement(b.a,{path:"/overview",component:fe}))},ge=(a(191),Object(l.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SEARCH_WORD":return v({},e,{searchWord:t.searchWord});case"ADD_FILTER":return v({},e,{filters:v({},e.filters,{},t.filter)});case"RESET_FILTER":return{filters:{type:null,country:null,vintage:null,packaging:null,eco:null,kosher:null,bioDynamic:null,green_packaging:null,gluten:null,volume:null,price:null,pricePerLiter:null,alcohol:null,tannins:null,fullness:null,freshness:null,sweetness:null,bitterness:null}};case"ADD_SORT":return v({},e,{sort:t.sort});default:return e}}))),he=Object(c.b)({uri:"http://it2810-26.idi.ntnu.no:4000",credentials:"include"}),be=new i.c({cache:new o.a,link:he});d.a.render(r.a.createElement(s.a,{client:be},r.a.createElement(u.a,{store:ge},r.a.createElement(ve,null))),document.getElementById("root"))},50:function(e,t,a){e.exports={Main:"Main_Main__CYWXU",ProductList:"Main_ProductList__3GFWe",Filters:"Main_Filters__1jXZI",Controls:"Main_Controls__mWqgX",SearchResults:"Main_SearchResults__1mzVS"}},86:function(e,t,a){e.exports={Checkbox:"Checkbox_Checkbox__1I2rG",Label:"Checkbox_Label__3WA_B"}},87:function(e,t,a){e.exports={Img:"ProductInfo_Img__3aXSL",InfoContainer:"ProductInfo_InfoContainer__DcT-J"}}},[[118,1,2]]]);
//# sourceMappingURL=main.71d2c227.chunk.js.map